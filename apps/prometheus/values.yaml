kube-prometheus-stack:
  # Disable Grafana - we deploy it separately
  grafana:
    enabled: false

  # Disable Alertmanager for lab
  alertmanager:
    enabled: false

  # Prometheus server config
  prometheus:
    prometheusSpec:
      # Enable remote write receiver for Tempo metrics
      enableRemoteWriteReceiver: true
      
      # Storage
      storageSpec:
        volumeClaimTemplate:
          spec:
            storageClassName: gp3
            accessModes: ["ReadWriteOnce"]
            resources:
              requests:
                storage: 10Gi

      # Resources
      resources:
        requests:
          cpu: 250m
          memory: 512Mi
        limits:
          cpu: 500m
          memory: 1Gi

      # Scrape all ServiceMonitors across namespaces
      serviceMonitorSelectorNilUsesHelmValues: false
      podMonitorSelectorNilUsesHelmValues: false
      ruleSelectorNilUsesHelmValues: false

    service:
      type: LoadBalancer

  # Node exporter - DISABLE (k8s-monitoring deploys via clusterMetrics)
  nodeExporter:
    enabled: false
  prometheus-node-exporter:
    enabled: false

  # Kube-state-metrics - DISABLE (k8s-monitoring deploys its own)
  kubeStateMetrics:
    enabled: false
  kube-state-metrics:
    enabled: false

  # Install CRDs (required for ServiceMonitor)
  crds:
    enabled: true
